<!DOCTYPE html><html lang="zh-CN" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="天前"><meta name="hour-prompt" content="小时前"><meta name="minute-prompt" content="分钟前"><meta name="justnow-prompt" content="刚刚"><meta name="generator" content="Jekyll v4.3.4" /><meta property="og:title" content="MySQL 中执行计划分析 - Optimizer trace表" /><meta property="og:locale" content="zh_CN" /><meta name="description" content="1. 概述" /><meta property="og:description" content="1. 概述" /><link rel="canonical" href="https://zcyoop.github.io/posts/MySQL-%E6%89%A7%E8%A1%8C%E8%AE%A1%E5%88%92%E5%88%86%E6%9E%90-Optimizer-trace%E8%A1%A8/" /><meta property="og:url" content="https://zcyoop.github.io/posts/MySQL-%E6%89%A7%E8%A1%8C%E8%AE%A1%E5%88%92%E5%88%86%E6%9E%90-Optimizer-trace%E8%A1%A8/" /><meta property="og:site_name" content="Zcyoop" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-12-21T00:00:00+08:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="MySQL 中执行计划分析 - Optimizer trace表" /><meta name="twitter:site" content="@twitter_username" /><meta name="google-site-verification" content="bYaaJN_P1KEMPHSc3NYLCjx75e0bMEvAtt54VYZ3jJw" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2021-12-29T20:29:08+08:00","datePublished":"2021-12-21T00:00:00+08:00","description":"1. 概述","headline":"MySQL 中执行计划分析 - Optimizer trace表","mainEntityOfPage":{"@type":"WebPage","@id":"https://zcyoop.github.io/posts/MySQL-%E6%89%A7%E8%A1%8C%E8%AE%A1%E5%88%92%E5%88%86%E6%9E%90-Optimizer-trace%E8%A1%A8/"},"url":"https://zcyoop.github.io/posts/MySQL-%E6%89%A7%E8%A1%8C%E8%AE%A1%E5%88%92%E5%88%86%E6%9E%90-Optimizer-trace%E8%A1%A8/"}</script><title>MySQL 中执行计划分析 - Optimizer trace表 | Zcyoop</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Zcyoop"><meta name="application-name" content="Zcyoop"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end" lang="zh-CN"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="https://blog-1253533258.cos.ap-shanghai.myqcloud.com/piggo/39327876.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Zcyoop</a></div><div class="site-subtitle font-italic">Zcyoop Blog</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>首页</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>分类</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>标签</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>归档</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>关于</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/zcyoop" aria-label="github" class="order-3" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/twitter_username" aria-label="twitter" class="order-4" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['zcy2nn','qq.com'].join('@')" aria-label="email" class="order-5" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" class="order-6" > <i class="fas fa-rss"></i> </a> <span class="icon-border order-2"></span> <span id="mode-toggle-wrapper" class="order-1"> <i class="mode-toggle fas fa-adjust"></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> 首页 </a> </span> <span>MySQL 中执行计划分析 - Optimizer trace表</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> 文章</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="搜索..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >取消</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>MySQL 中执行计划分析 - Optimizer trace表</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> zcyoop </span> 发表于 <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="2021-12-21, 00:00 +0800" >2021-12-21<i class="unloaded">2021-12-21T00:00:00+08:00</i> </span></div><div> <span> 更新于 <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="2021-12-29, 20:29 +0800" >2021-12-29<i class="unloaded">2021-12-29T20:29:08+08:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2146 字">11 分钟 阅读</span></div></div><div class="post-content"><h2 id="1-概述">1. 概述</h2><p>​ 对于 MySQL 5.6 以及之前的版本来说，查询优化器就像是一个黑盒子一样，你只能通过 EXPLAIN 语句查看到最后优化器决定使用的执行计划，却无法知道它为什么做这个决策。</p><p>​ 在 MySQL 5.6 以及之后的版本中，MySQL 提出了一个 optimizer trace 的功能，这个功能可以让我们方便的查看优化器生成执行计划的整个过程。</p><h2 id="2optimizer-trace的使用">2.Optimizer trace的使用</h2><blockquote><p>Optimizer trace 并不是自动就会默认开启的，开启 trace 多多少少都会有一些额外的工作要做，因此并不建议一直开着。但 trace 属于轻量级的工具，开启和关闭都非常简便，对系统的影响也微乎其微。而且支持在 session 中开启，不影响其它 session，对系统的影响降到了最低。</p></blockquote><h3 id="21-查看optimizer-trace状态">2.1 查看<code class="language-plaintext highlighter-rouge">optimizer trace</code>状态</h3><div class="language-sql highlighter-rouge"><div class="code-header"> <span text-data=" Sql "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="o">&gt;</span> <span class="k">show</span> <span class="n">variables</span> <span class="k">like</span> <span class="s1">'%optimizer_trace%'</span><span class="p">;</span>

<span class="o">+</span><span class="c1">----------------------------+--------------------------------------------------------------------------+</span>
<span class="o">|</span><span class="n">Variable_name</span>               <span class="o">|</span><span class="n">Value</span>                                                                     <span class="o">|</span>
<span class="o">+</span><span class="c1">----------------------------+--------------------------------------------------------------------------+</span>
<span class="o">|</span><span class="n">optimizer_trace</span>             <span class="o">|</span><span class="n">enabled</span><span class="o">=</span><span class="k">off</span><span class="p">,</span><span class="n">one_line</span><span class="o">=</span><span class="k">off</span>                                                  <span class="o">|</span>
<span class="o">|</span><span class="n">optimizer_trace_features</span>    <span class="o">|</span><span class="n">greedy_search</span><span class="o">=</span><span class="k">on</span><span class="p">,</span><span class="n">range_optimizer</span><span class="o">=</span><span class="k">on</span><span class="p">,</span><span class="n">dynamic_range</span><span class="o">=</span><span class="k">on</span><span class="p">,</span><span class="n">repeated_subselect</span><span class="o">=</span><span class="k">on</span><span class="o">|</span>
<span class="o">|</span><span class="n">optimizer_trace_limit</span>       <span class="o">|</span><span class="mi">1</span>                                                                         <span class="o">|</span>
<span class="o">|</span><span class="n">optimizer_trace_max_mem_size</span><span class="o">|</span><span class="mi">16384</span>                                                                     <span class="o">|</span>
<span class="o">|</span><span class="n">optimizer_trace_offset</span>      <span class="o">|-</span><span class="mi">1</span>                                                                        <span class="o">|</span>
<span class="o">+</span><span class="c1">----------------------------+--------------------------------------------------------------------------+</span>
</pre></table></code></div></div><ul><li>optimizer_trace：enabled状态；one_line的值是控制输出格式的，如果为on那么所有输出都将在一行中展示<li>optimizer_trace_limit：OPTIMIZER_TRACE表中保存条数<li>optimizer_trace_max_mem_size：由于优化过程可能会输出很多，如果超过某个限制时，多余的文本将不会被显示<li>optimizer_trace_offset：查询OPTIMIZER_TRACE表时的偏移量</ul><h3 id="22-开启optimizer-trace功能">2.2 开启<code class="language-plaintext highlighter-rouge">optimizer trace</code>功能</h3><div class="language-sql highlighter-rouge"><div class="code-header"> <span text-data=" Sql "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="k">SET</span> <span class="n">optimizer_trace</span><span class="o">=</span><span class="nv">"enabled=on"</span><span class="p">;</span>
<span class="k">SET</span> <span class="n">optimizer_trace_limit</span><span class="o">=</span><span class="mi">10</span><span class="p">;</span>
<span class="k">SET</span> <span class="n">optimizer_trace_offset</span><span class="o">=</span><span class="mi">10</span><span class="p">;</span>
<span class="k">SET</span> <span class="n">optimizer_trace_max_mem_size</span> <span class="o">=</span> <span class="mi">32768</span><span class="p">;</span>
</pre></table></code></div></div><p>注意：在这里设置了optimizer_trace_limit为10主要是因为在使用<code class="language-plaintext highlighter-rouge">DataGrip</code>时会自动插入多条数据影响查看</p><h3 id="23--查询上一个语句的优化过程">2.3 <strong>查询上一个语句的优化过程</strong></h3><div class="language-sql highlighter-rouge"><div class="code-header"> <span text-data=" Sql "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">information_schema</span><span class="p">.</span><span class="n">OPTIMIZER_TRACE</span><span class="p">;</span>
</pre></table></code></div></div><ul><li>QUERY ：表示我们的查询语句。<li>TRACE ：表示优化过程的JSON格式文本。<li>MISSING_BYTES_BEYOND_MAX_MEM_SIZE ：由于优化过程可能会输出很多，如果超过某个限制时，多余的文本将不会被显示，这个字段展示了被忽略的文本字节数。<li>INSUFFICIENT_PRIVILEGES ：表示是否没有权限查看优化过程，默认值是0，只有某些特殊情况下才会是1 ，我们暂时不关心这个字段的值</ul><h3 id="24--关闭optimizer-trace-功能">2.4 关闭optimizer trace 功能</h3><div class="language-sql highlighter-rouge"><div class="code-header"> <span text-data=" Sql "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="k">SET</span> <span class="n">optimizer_trace</span><span class="o">=</span><span class="nv">"enabled=off"</span><span class="p">;</span>
<span class="k">SET</span> <span class="n">optimizer_trace_limit</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span>
<span class="k">SET</span> <span class="n">optimizer_trace_offset</span><span class="o">=-</span><span class="mi">1</span><span class="p">;</span>
<span class="k">SET</span> <span class="n">optimizer_trace_max_mem_size</span> <span class="o">=</span> <span class="mi">16384</span><span class="p">;</span>
</pre></table></code></div></div><h2 id="3-具体分析">3. 具体分析</h2><p>TRACE文本分析：</p><div class="language-json highlighter-rouge"><div class="code-header"> <span text-data=" JSON "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
</pre><td class="rouge-code"><pre><span class="p">{</span><span class="w">
  </span><span class="nl">"steps"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"join_preparation"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">#</span><span class="w">  </span><span class="err">prepare阶段</span><span class="w">
        </span><span class="nl">"select#"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"steps"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="nl">"expanded_query"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/* select#1 */ select sql_no_cache `item_sale_summary`.`ent_id` AS `ent_id`,`item_sale_summary`.`region_code` AS `region_code`,ceiling((count(distinct `item_sale_summary`.`item_code`,`item_sale_summary`.`barcode`,date_format(`item_sale_summary`.`trans_date`,'%Y-%m-%d')) / ((to_days('2021-12-05') - to_days('2021-11-05')) + 1))) AS `sku_item_sale` from `item_sale_summary` where ((`item_sale_summary`.`trans_date` between '2021-11-01' and '2021-11-15') and (`item_sale_summary`.`ent_id` = 1747964630024192400)) group by `item_sale_summary`.`ent_id`,`item_sale_summary`.`region_code`"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"join_optimization"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="err">optimize阶段</span><span class="w">
        </span><span class="nl">"select#"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"steps"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="nl">"condition_processing"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="err">处理搜索条件</span><span class="w">
              </span><span class="nl">"condition"</span><span class="p">:</span><span class="w"> </span><span class="s2">"WHERE"</span><span class="p">,</span><span class="w">
              </span><span class="err">#</span><span class="w"> </span><span class="err">原始搜索条件</span><span class="w">
              </span><span class="nl">"original_condition"</span><span class="p">:</span><span class="w"> </span><span class="s2">"((`item_sale_summary`.`trans_date` between '2021-11-01' and '2021-11-15') and (`item_sale_summary`.`ent_id` = 1747964630024192400))"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"steps"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="p">{</span><span class="w">  
                  </span><span class="nl">"transformation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"equality_propagation"</span><span class="p">,</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="err">等值传递转换</span><span class="w">
                  </span><span class="nl">"resulting_condition"</span><span class="p">:</span><span class="w"> </span><span class="s2">"((`item_sale_summary`.`trans_date` between '2021-11-01' and '2021-11-15') and multiple equal(1747964630024192400, `item_sale_summary`.`ent_id`))"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="p">{</span><span class="w">
                  </span><span class="nl">"transformation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"constant_propagation"</span><span class="p">,</span><span class="w">  </span><span class="err">#</span><span class="w"> </span><span class="err">常量传递转换</span><span class="w"> 
                  </span><span class="nl">"resulting_condition"</span><span class="p">:</span><span class="w"> </span><span class="s2">"((`item_sale_summary`.`trans_date` between '2021-11-01' and '2021-11-15') and multiple equal(1747964630024192400, `item_sale_summary`.`ent_id`))"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="p">{</span><span class="w">
                  </span><span class="nl">"transformation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"trivial_condition_removal"</span><span class="p">,</span><span class="w">  </span><span class="err">#</span><span class="w"> </span><span class="err">去除没用的条件</span><span class="w">
                  </span><span class="nl">"resulting_condition"</span><span class="p">:</span><span class="w"> </span><span class="s2">"((`item_sale_summary`.`trans_date` between '2021-11-01' and '2021-11-15') and multiple equal(1747964630024192400, `item_sale_summary`.`ent_id`))"</span><span class="w">
                </span><span class="p">}</span><span class="w">
              </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="nl">"substitute_generated_columns"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">  </span><span class="err">#</span><span class="w"> </span><span class="err">替换虚拟生成列</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="nl">"table_dependencies"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">  </span><span class="err">#</span><span class="w"> </span><span class="err">表的依赖信息</span><span class="w">
              </span><span class="p">{</span><span class="w">
                </span><span class="nl">"table"</span><span class="p">:</span><span class="w"> </span><span class="s2">"`item_sale_summary`"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"row_may_be_null"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="nl">"map_bit"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="nl">"depends_on_map_bits"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="p">]</span><span class="w">
              </span><span class="p">}</span><span class="w">
            </span><span class="p">]</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="nl">"ref_optimizer_key_uses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
              </span><span class="p">{</span><span class="w">
                </span><span class="nl">"table"</span><span class="p">:</span><span class="w"> </span><span class="s2">"`item_sale_summary`"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"field"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ent_id"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"equals"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1747964630024192400"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"null_rejecting"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
              </span><span class="p">},</span><span class="w">
              </span><span class="p">{</span><span class="w">
                </span><span class="nl">"table"</span><span class="p">:</span><span class="w"> </span><span class="s2">"`item_sale_summary`"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"field"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ent_id"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"equals"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1747964630024192400"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"null_rejecting"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
              </span><span class="p">}</span><span class="w">
            </span><span class="p">]</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="nl">"rows_estimation"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">  </span><span class="err">#</span><span class="w"> </span><span class="err">预估不同单表访问方法的访问成本</span><span class="w">
              </span><span class="p">{</span><span class="w">
                </span><span class="nl">"table"</span><span class="p">:</span><span class="w"> </span><span class="s2">"`item_sale_summary`"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"range_analysis"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                  </span><span class="nl">"table_scan"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="err">全表扫描的行数以及成本</span><span class="w">
                    </span><span class="nl">"rows"</span><span class="p">:</span><span class="w"> </span><span class="mi">4245934</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"cost"</span><span class="p">:</span><span class="w"> </span><span class="mi">944293</span><span class="w">
                  </span><span class="p">},</span><span class="w">
                  </span><span class="nl">"potential_range_indexes"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">  </span><span class="err">#</span><span class="w"> </span><span class="err">分析可能使用的索引</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                      </span><span class="nl">"index"</span><span class="p">:</span><span class="w"> </span><span class="s2">"unique_index"</span><span class="p">,</span><span class="w">
                      </span><span class="nl">"usable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="err">可能被使用</span><span class="w">
                      </span><span class="nl">"key_parts"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                        </span><span class="s2">"trans_date"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"ent_id"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"region_code"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"channel_keyword"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"item_code"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"barcode"</span><span class="w">
                      </span><span class="p">]</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                      </span><span class="nl">"index"</span><span class="p">:</span><span class="w"> </span><span class="s2">"idx_ent_date_region"</span><span class="p">,</span><span class="w">
                      </span><span class="nl">"usable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
                      </span><span class="nl">"key_parts"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                        </span><span class="s2">"ent_id"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"trans_date"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"region_code"</span><span class="w">
                      </span><span class="p">]</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                      </span><span class="nl">"index"</span><span class="p">:</span><span class="w"> </span><span class="s2">"idx_saled_item"</span><span class="p">,</span><span class="w">
                      </span><span class="nl">"usable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
                      </span><span class="nl">"key_parts"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                        </span><span class="s2">"ent_id"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"region_code"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"item_code"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"barcode"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"trans_date"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"channel_keyword"</span><span class="w">
                      </span><span class="p">]</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                  </span><span class="p">],</span><span class="w">
                  </span><span class="nl">"best_covering_index_scan"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"index"</span><span class="p">:</span><span class="w"> </span><span class="s2">"unique_index"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"cost"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.11e6</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"chosen"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"cause"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cost"</span><span class="w">
                  </span><span class="p">},</span><span class="w">
                  </span><span class="nl">"setup_range_conditions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                  </span><span class="p">],</span><span class="w">
                  </span><span class="nl">"group_index_range"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"chosen"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"cause"</span><span class="p">:</span><span class="w"> </span><span class="s2">"not_applicable_aggregate_function"</span><span class="w">
                  </span><span class="p">},</span><span class="w">
                  </span><span class="nl">"analyzing_range_alternatives"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">  </span><span class="err">#</span><span class="w"> </span><span class="err">分析各种可能使用的索引的成本</span><span class="w">
                    </span><span class="nl">"range_scan_alternatives"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                      </span><span class="p">{</span><span class="w">
                        </span><span class="err">#</span><span class="w"> </span><span class="err">使用unique_index的成本分析</span><span class="w">
                        </span><span class="nl">"index"</span><span class="p">:</span><span class="w"> </span><span class="s2">"unique_index"</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"ranges"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                          </span><span class="s2">"0x61cb0f &lt;= trans_date &lt;= 0x6fcb0f"</span><span class="w">
                        </span><span class="p">],</span><span class="w">
                        </span><span class="nl">"index_dives_for_eq_ranges"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="err">是否使用index</span><span class="w"> </span><span class="err">dive</span><span class="w">
                        </span><span class="nl">"rowid_ordered"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="err">使用该索引获取的记录是否按照主键排序</span><span class="w">
                        </span><span class="nl">"using_mrr"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="err">是否使用mrr</span><span class="w">
                        </span><span class="nl">"index_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="err">是否是索引覆盖访问</span><span class="w">
                        </span><span class="nl">"rows"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="err">使用该索引获取的记录条数</span><span class="w">
                        </span><span class="nl">"cost"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.21</span><span class="p">,</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="err">使用该索引的成本</span><span class="w">
                        </span><span class="nl">"chosen"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="err">是否选择该索引</span><span class="w">
                      </span><span class="p">},</span><span class="w">
                      </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"index"</span><span class="p">:</span><span class="w"> </span><span class="s2">"idx_ent_date_region"</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"ranges"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                          </span><span class="s2">"1747964630024192400 &lt;= ent_id &lt;= 1747964630024192400 AND 0x61cb0f &lt;= trans_date &lt;= 0x6fcb0f"</span><span class="w">
                        </span><span class="p">],</span><span class="w">
                        </span><span class="nl">"index_dives_for_eq_ranges"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"rowid_ordered"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"using_mrr"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"index_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"rows"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"cost"</span><span class="p">:</span><span class="w"> </span><span class="mf">2.21</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"chosen"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"cause"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cost"</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="err">因为成本太大所以不选择该索引</span><span class="w">
                      </span><span class="p">},</span><span class="w">
                      </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"index"</span><span class="p">:</span><span class="w"> </span><span class="s2">"idx_saled_item"</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"ranges"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                          </span><span class="s2">"1747964630024192400 &lt;= ent_id &lt;= 1747964630024192400"</span><span class="w">
                        </span><span class="p">],</span><span class="w">
                        </span><span class="nl">"index_dives_for_eq_ranges"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"rowid_ordered"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"using_mrr"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"index_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"rows"</span><span class="p">:</span><span class="w"> </span><span class="mi">753872</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"cost"</span><span class="p">:</span><span class="w"> </span><span class="mi">197892</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"chosen"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"cause"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cost"</span><span class="w">
                      </span><span class="p">}</span><span class="w">
                    </span><span class="p">],</span><span class="w">
                    </span><span class="nl">"analyzing_roworder_intersect"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                      </span><span class="err">#</span><span class="w"> </span><span class="err">分析使用索引合并的成本</span><span class="w">
                      </span><span class="nl">"usable"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                      </span><span class="nl">"cause"</span><span class="p">:</span><span class="w"> </span><span class="s2">"too_few_roworder_scans"</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                  </span><span class="p">},</span><span class="w">
                  </span><span class="nl">"chosen_range_access_summary"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="err">#</span><span class="w"> </span><span class="err">对于上述单表查询最优的访问方法</span><span class="w">
                    </span><span class="nl">"range_access_plan"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"range_scan"</span><span class="p">,</span><span class="w">
                      </span><span class="nl">"index"</span><span class="p">:</span><span class="w"> </span><span class="s2">"unique_index"</span><span class="p">,</span><span class="w">
                      </span><span class="nl">"rows"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
                      </span><span class="nl">"ranges"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                        </span><span class="s2">"0x61cb0f &lt;= trans_date &lt;= 0x6fcb0f"</span><span class="w">
                      </span><span class="p">]</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="nl">"rows_for_plan"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"cost_for_plan"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.21</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"chosen"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
                  </span><span class="p">}</span><span class="w">
                </span><span class="p">}</span><span class="w">
              </span><span class="p">}</span><span class="w">
            </span><span class="p">]</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="err">#</span><span class="w"> </span><span class="err">分析各种可能的执行计划</span><span class="w">
            </span><span class="nl">"considered_execution_plans"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
              </span><span class="p">{</span><span class="w">
                </span><span class="nl">"plan_prefix"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="nl">"table"</span><span class="p">:</span><span class="w"> </span><span class="s2">"`item_sale_summary`"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"best_access_path"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                  </span><span class="nl">"considered_access_paths"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                      </span><span class="nl">"access_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ref"</span><span class="p">,</span><span class="w">
                      </span><span class="nl">"index"</span><span class="p">:</span><span class="w"> </span><span class="s2">"idx_ent_date_region"</span><span class="p">,</span><span class="w">
                      </span><span class="nl">"rows"</span><span class="p">:</span><span class="w"> </span><span class="mf">710.55</span><span class="p">,</span><span class="w">
                      </span><span class="nl">"cost"</span><span class="p">:</span><span class="w"> </span><span class="mf">852.66</span><span class="p">,</span><span class="w">
                      </span><span class="nl">"chosen"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                      </span><span class="nl">"access_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ref"</span><span class="p">,</span><span class="w">
                      </span><span class="nl">"index"</span><span class="p">:</span><span class="w"> </span><span class="s2">"idx_saled_item"</span><span class="p">,</span><span class="w">
                      </span><span class="nl">"rows"</span><span class="p">:</span><span class="w"> </span><span class="mi">753872</span><span class="p">,</span><span class="w">
                      </span><span class="nl">"cost"</span><span class="p">:</span><span class="w"> </span><span class="mi">197892</span><span class="p">,</span><span class="w">
                      </span><span class="nl">"chosen"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                      </span><span class="nl">"rows_to_scan"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
                      </span><span class="nl">"access_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"range"</span><span class="p">,</span><span class="w">
                      </span><span class="nl">"range_details"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"used_index"</span><span class="p">:</span><span class="w"> </span><span class="s2">"unique_index"</span><span class="w">
                      </span><span class="p">},</span><span class="w">
                      </span><span class="nl">"resulting_rows"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.1776</span><span class="p">,</span><span class="w">
                      </span><span class="nl">"cost"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.41</span><span class="p">,</span><span class="w">
                      </span><span class="nl">"chosen"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
                      </span><span class="nl">"use_tmp_table"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                  </span><span class="p">]</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"condition_filtering_pct"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
                </span><span class="nl">"rows_for_plan"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.1776</span><span class="p">,</span><span class="w">
                </span><span class="nl">"cost_for_plan"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.41</span><span class="p">,</span><span class="w">
                </span><span class="nl">"sort_cost"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.1776</span><span class="p">,</span><span class="w">
                </span><span class="nl">"new_cost_for_plan"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.5876</span><span class="p">,</span><span class="w">
                </span><span class="nl">"chosen"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
              </span><span class="p">}</span><span class="w">
            </span><span class="p">]</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="err">#</span><span class="w"> </span><span class="err">尝试给查询添加一些其他的查询条件</span><span class="w">
            </span><span class="nl">"attaching_conditions_to_tables"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"original_condition"</span><span class="p">:</span><span class="w"> </span><span class="s2">"((`item_sale_summary`.`ent_id` = 1747964630024192400) and (`item_sale_summary`.`trans_date` between '2021-11-01' and '2021-11-15'))"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"attached_conditions_computation"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
              </span><span class="p">],</span><span class="w">
              </span><span class="nl">"attached_conditions_summary"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="p">{</span><span class="w">
                  </span><span class="nl">"table"</span><span class="p">:</span><span class="w"> </span><span class="s2">"`item_sale_summary`"</span><span class="p">,</span><span class="w">
                  </span><span class="nl">"attached"</span><span class="p">:</span><span class="w"> </span><span class="s2">"((`item_sale_summary`.`ent_id` = 1747964630024192400) and (`item_sale_summary`.`trans_date` between '2021-11-01' and '2021-11-15'))"</span><span class="w">
                </span><span class="p">}</span><span class="w">
              </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="nl">"clause_processing"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"clause"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GROUP BY"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"original_clause"</span><span class="p">:</span><span class="w"> </span><span class="s2">"`item_sale_summary`.`ent_id`,`item_sale_summary`.`region_code`"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="p">{</span><span class="w">
                  </span><span class="nl">"item"</span><span class="p">:</span><span class="w"> </span><span class="s2">"`item_sale_summary`.`ent_id`"</span><span class="p">,</span><span class="w">
                  </span><span class="nl">"equals_constant_in_where"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="p">{</span><span class="w">
                  </span><span class="nl">"item"</span><span class="p">:</span><span class="w"> </span><span class="s2">"`item_sale_summary`.`region_code`"</span><span class="w">
                </span><span class="p">}</span><span class="w">
              </span><span class="p">],</span><span class="w">
              </span><span class="nl">"resulting_clause_is_simple"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
              </span><span class="nl">"resulting_clause"</span><span class="p">:</span><span class="w"> </span><span class="s2">"`item_sale_summary`.`region_code`"</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="nl">"reconsidering_access_paths_for_index_ordering"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"clause"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GROUP BY"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"steps"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
              </span><span class="p">],</span><span class="w">
              </span><span class="nl">"index_order_summary"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"table"</span><span class="p">:</span><span class="w"> </span><span class="s2">"`item_sale_summary`"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"index_provides_order"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="nl">"order_direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"undefined"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"index"</span><span class="p">:</span><span class="w"> </span><span class="s2">"unique_index"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"plan_changed"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
              </span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="err">#</span><span class="w"> </span><span class="err">再稍稍的改进一下执行计划</span><span class="w">
            </span><span class="nl">"refine_plan"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
              </span><span class="p">{</span><span class="w">
                </span><span class="nl">"table"</span><span class="p">:</span><span class="w"> </span><span class="s2">"`item_sale_summary`"</span><span class="w">
              </span><span class="p">}</span><span class="w">
            </span><span class="p">]</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="nl">"creating_tmp_table"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"tmp_table_info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"table"</span><span class="p">:</span><span class="w"> </span><span class="s2">"intermediate_tmp_table"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"row_length"</span><span class="p">:</span><span class="w"> </span><span class="mi">344</span><span class="p">,</span><span class="w">
                </span><span class="nl">"key_length"</span><span class="p">:</span><span class="w"> </span><span class="mi">349</span><span class="p">,</span><span class="w">
                </span><span class="nl">"unique_constraint"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="nl">"location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"memory (heap)"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"row_limit_estimate"</span><span class="p">:</span><span class="w"> </span><span class="mi">48770</span><span class="w">
              </span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="err">#</span><span class="w"> </span><span class="err">execute阶段</span><span class="w">
      </span><span class="nl">"join_execution"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"select#"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"steps"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="nl">"filesort_information"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
              </span><span class="p">{</span><span class="w">
                </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"asc"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"table"</span><span class="p">:</span><span class="w"> </span><span class="s2">"`item_sale_summary`"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"field"</span><span class="p">:</span><span class="w"> </span><span class="s2">"region_code"</span><span class="w">
              </span><span class="p">}</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="nl">"filesort_priority_queue_optimization"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"usable"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
              </span><span class="nl">"cause"</span><span class="p">:</span><span class="w"> </span><span class="s2">"not applicable (no LIMIT)"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"filesort_execution"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="nl">"filesort_summary"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"rows"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
              </span><span class="nl">"examined_rows"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
              </span><span class="nl">"number_of_tmp_files"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
              </span><span class="nl">"sort_buffer_size"</span><span class="p">:</span><span class="w"> </span><span class="mi">261632</span><span class="p">,</span><span class="w">
              </span><span class="nl">"sort_mode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;sort_key, packed_additional_fields&gt;"</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></table></code></div></div><p>想要更加具体的了解其中的含义可参考<a href="https://dev.mysql.com/doc/internals/en/optimizer-tracing.html">Chapter 8 Tracing the Optimizer</a></p><h2 id="4-总结">4. 总结</h2><p>以上为<code class="language-plaintext highlighter-rouge">optimizer trace</code>的简单使用，使用好该功能可以有效帮助我们了解MySQL的优化过程。</p><p>整体优化过程虽然看起来杂乱，但主要分成了以下三个部分</p><ul><li>prepare 阶段<li>optimize 阶段<li>execute 阶段</ul><p>的基于成本的优化主要集中在 optimize 阶段，对于单表查询来说，我们主要关注 optimize 阶段的 “rows_estimation” 这个过程，这个过程深入分析了对单表查询的各种执行方案的成本；对于多表连接查询来说，我们更多需要关注 “considered_execution_plans” 这个过程，这个过程里会写明各种不同的连接方式所对应的成本。反正优化器最终会选择成本最低的那种方案来作为最终的执行计划，也就是我们使用 EXPLAIN 语句所展现出的那种方案。</p><h2 id="5-参考">5. 参考</h2><ul><li><em>《MySQL是怎样运行的》</em><li><em><a href="http://mysql.taobao.org/monthly/2019/11/03/">MySQL · 最佳实践 · 性能分析的大杀器—Optimizer trace</a></em><li><em><a href="https://dev.mysql.com/doc/internals/en/optimizer-tracing.html">Chapter 8 Tracing the Optimizer</a></em></ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/'>数据库</a>, <a href='/categories/mysql/'>mysql</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/mysql/" class="post-tag no-text-decoration" >mysql</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> 本文由作者按照 <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> 进行授权</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">分享</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=MySQL 中执行计划分析 - Optimizer trace表 - Zcyoop&url=https://zcyoop.github.io/posts/MySQL-%E6%89%A7%E8%A1%8C%E8%AE%A1%E5%88%92%E5%88%86%E6%9E%90-Optimizer-trace%E8%A1%A8/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=MySQL 中执行计划分析 - Optimizer trace表 - Zcyoop&u=https://zcyoop.github.io/posts/MySQL-%E6%89%A7%E8%A1%8C%E8%AE%A1%E5%88%92%E5%88%86%E6%9E%90-Optimizer-trace%E8%A1%A8/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=MySQL 中执行计划分析 - Optimizer trace表 - Zcyoop&url=https://zcyoop.github.io/posts/MySQL-%E6%89%A7%E8%A1%8C%E8%AE%A1%E5%88%92%E5%88%86%E6%9E%90-Optimizer-trace%E8%A1%A8/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="分享链接" title-succeed="链接已复制！"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>最近更新</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/Python-%E7%BC%BA%E5%B0%91C++%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7/">Python - 缺少C++构建工具</a><li><a href="/posts/Docker-Remote-API%E7%9A%84TLS%E8%AE%A4%E8%AF%81&Portainer%E9%85%8D%E7%BD%AE/">Docker Remote API的TLS认证&Portainer配置</a><li><a href="/posts/Kafka-%E5%89%AF%E6%9C%AC%E6%9C%BA%E5%88%B6/">Kafka - 副本机制</a><li><a href="/posts/Flink-Window-%E6%A6%82%E5%BF%B5&%E4%BD%BF%E7%94%A8/">Flink - Window 概念&使用</a><li><a href="/posts/Java%E5%B9%B6%E5%8F%91-CompletableFuture%E8%AF%A6%E8%A7%A3/">Java 并发 - CompletableFuture详解</a></ul></div><div id="access-tags"> <span>热门标签</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/java/">java</a> <a class="post-tag" href="/tags/hadoop/">hadoop</a> <a class="post-tag" href="/tags/spark/">spark</a> <a class="post-tag" href="/tags/flink/">flink</a> <a class="post-tag" href="/tags/hive/">hive</a> <a class="post-tag" href="/tags/mysql/">mysql</a> <a class="post-tag" href="/tags/jvm/">jvm</a> <a class="post-tag" href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">设计模式</a> <a class="post-tag" href="/tags/python/">python</a> <a class="post-tag" href="/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/">机器学习</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">文章内容</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>相关文章</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/MySQL-MySQL%E4%B8%AD%E7%9A%84%E7%B4%A2%E5%BC%95/"><div class="card-body"> <span class="timeago small" >2021-08-18<i class="unloaded">2021-08-18T00:00:00+08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>MySQL - MySQL中的索引</h3><div class="text-muted small"><p> 1. 概述 定义：索引是存储引擎用于快速找到记录的一种数据结构。举例说明：如果查找一本书中的某个特定主题，一般会先看书的目录（类似索引），找到对应页面。在MySQL，存储引擎采用类似的方法使用索引，高效获取查找的数据。 索引的分类 从存储结构上来划分 Btree 索引（B+tree，B-tree) 哈希索引 full-index 全文...</p></div></div></a></div><div class="card"> <a href="/posts/MySQL%E7%B4%A2%E5%BC%95%E4%B8%8EMongoDB%E7%B4%A2%E5%BC%95%E7%9A%84%E5%8C%BA%E5%88%AB/"><div class="card-body"> <span class="timeago small" >2021-08-19<i class="unloaded">2021-08-19T00:00:00+08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>MySQL索引与MongoDB索引的区别</h3><div class="text-muted small"><p> MySQL索引与MongoDB索引的区别 1. 背景 最近学习了MySQL的索引的相关内容，而目前生产系统上使用的使MongoDB，遂对这两个不同数据库的索引进行了下对比。这里的MySQL值得使Innodb存储引擎。 2. 两个数据库之间的区别 MySQL中的Innodb采用的使B+Tree作为索引的结构，而MongoDB使用的使B-Tree作为索引结构，所以这两个数据库索引之间...</p></div></div></a></div><div class="card"> <a href="/posts/MySQL-%E6%89%A7%E8%A1%8C%E8%AE%A1%E5%88%92/"><div class="card-body"> <span class="timeago small" >2021-10-18<i class="unloaded">2021-10-18T00:00:00+08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>MySQL - 执行计划</h3><div class="text-muted small"><p> 1.概述 ​ 一条查询语句在经过MySQL查询优化器的各种基于成本和规则的优化会后生成一个所谓的执行计划，这个执行计划展示了接下来具体执行查询的方式，比如多表连接的顺序是什么，对于每个表采用什么访问方法来具体执行查询等等。 ​ 如果需要查询具体的执行计划，可通过在查询语句前追加EXPLAIN进行查看，例如： flink_data_qnh&gt; EXPLAIN SELECT 1 +--...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/Java-%E5%9F%BA%E7%A1%80-%E6%B3%A8%E8%A7%A3%E6%9C%BA%E5%88%B6%E8%AF%A6%E8%A7%A3/" class="btn btn-outline-primary" prompt="上一篇"><p>Java 基础 - 注解机制详解</p></a> <a href="/posts/Java-%E5%B9%B6%E5%8F%91-synchronized%E5%85%B3%E9%94%AE%E5%AD%97%E4%BD%BF%E7%94%A8/" class="btn btn-outline-primary" prompt="下一篇"><p>Java 并发 - synchronized关键字使用</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2024 <a href="https://github.com/zcyoop">zcyoop</a>. <span data-toggle="tooltip" data-placement="top" title="除非另有说明，本网站上的博客文章均由作者按照知识共享署名 4.0 国际 (CC BY 4.0) 许可协议进行授权。">保留部分权利。</span></p></div><div class="footer-right"><p class="mb-0"> 本站由 <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> 生成，采用 <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> 主题。</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">热门标签</h4><a class="post-tag" href="/tags/java/">java</a> <a class="post-tag" href="/tags/hadoop/">hadoop</a> <a class="post-tag" href="/tags/spark/">spark</a> <a class="post-tag" href="/tags/flink/">flink</a> <a class="post-tag" href="/tags/hive/">hive</a> <a class="post-tag" href="/tags/mysql/">mysql</a> <a class="post-tag" href="/tags/jvm/">jvm</a> <a class="post-tag" href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">设计模式</a> <a class="post-tag" href="/tags/python/">python</a> <a class="post-tag" href="/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/">机器学习</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">搜索结果为空</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-WR4TKVL8XR"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-WR4TKVL8XR'); }); </script>
